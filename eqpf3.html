<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>環品好書</title>
    <link href="common/css/bootstrap.css" rel="stylesheet">
    <link href="common/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="common/css/style.css" rel="stylesheet">
    <style>
        .articleBlock .pic img {
            width: 100%;
            max-width: 250px;
            height: auto;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="container headerPage">
        <div class="headerLogo">
            <a href="index.html"><img src="common/img/indexLogo.png" alt="環品好書" /></a>
        </div>
    </div>

    <div class="container contentPage articlePage2">
        <div class="contentTitle">推薦書籍</div>
        <div class="row articleList">
            <div class="col-md-3 col-sm-6">
                <div class="articleBlock">
                    <div class="info">
                        <div class="title">我們都是氣候世代</div>
                    </div>
                    <div class="pic">
                        <a href="book_0001.html"><img src="common/img/book_0001.png" /></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="articleBlock">
                    <div class="info">
                        <div class="title">挺身為環境</div>
                    </div>
                    <div class="pic">
                        <a href="book_0002.html"><img src="common/img/book_0002.png" /></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="articleBlock">
                    <div class="info">
                        <div class="title">食物與環境</div>
                    </div>
                    <div class="pic">
                        <a href="http://earthopinions.org/articleDetail.aspx?categoryId=1&dsn=914"><img src="https://i.imgur.com/PD26RtT.png" /></a>
                    </div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="articleBlock">
                    <div class="info">
                        <div class="title">氣候法彙編</div>
                    </div>
                    <div class="pic">
                        <a href="http://earthopinions.org/articleDetail.aspx?categoryId=1&dsn=776"><img src="https://i.imgur.com/WtA8VUm.png" /></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

<div class="container contentPage articlePage2">

<div class="contentTitle">購書資訊</div>

<p>感謝您對本會出版品的支持，環品會目前出版書籍有以下四本<br />

我們都是氣候世代，售價360元<br />
挺身為環境，售價380元<br />
食物與環境，售價360元<br />
氣候法彙編，售價700元，<b>請至博客來<a href="https://www.books.com.tw/products/0010837531" target="_blank">訂閱</a></b><br />

<br />
<br />
購買優惠：<br />
購買3本以上免運費<br />
10本以上有九折優惠。<br /><br />

匯款資訊：<br />
匯款帳號：台灣銀行信義分行 054-001-051897<br />
戶名：財團法人環境品質文教基金會<br />

<br />
購買步驟：<br />
1.請在下方表單選擇你想購買的書籍，系統會帶出總金額<br />
2.匯款到上述基金會帳號<br />
3.匯款完成後，填寫下方表單，資料會提交到環品會信箱info.eqpf@msa.hinet.net<br />
4.請在表單上註明您的訂購詳情（書籍名稱、數量）。如需收據請在訊息欄位註明統編號碼與抬頭。<br />5.我們將盡快處理您的訂單，並安排寄送。<br />
<br />
更新訊息：<br />
『我們都是氣候世代』、『挺身為環境』、『食物與環境』、『氣候法彙編』，現正在各大書店及網路書城熱賣中，歡迎舊雨新知踴躍支持並購買。<br />
在哪些通路、書城可以買到這兩本書？金石堂、博客來、三民書局、政大書城、誠品及誠品網路書店、讀冊生活TAZZE、城邦閱讀花園、樂天書城等。<br />

</p>

</div>

<div class="container contentPage articlePage2">

<div class="contentTitle">購書表單</div>

<form action="https://formspree.io/f/xdoqwbvd" method="post">

<label for="name">訂購人姓名:</label>
<input type="text" id="name" name="name" required><br>

<label for="email">電子郵件地址:</label>
<input type="email" id="email" name="email" required><br>

<label>訂購書籍本數:</label><br>

<div>
<label for="我們都是氣候世代">我們都是氣候世代:</label>
<input type="number" id="我們都是氣候世代" name="我們都是氣候世代" min="0" value="0" oninput="calculateTotal()">
<span>本</span>
</div>

<div>
<label for="挺身為環境">挺身為環境　　　:</label>
<input type="number" id="挺身為環境" name="挺身為環境" min="0" value="0" oninput="calculateTotal()">
<span>本</span>
</div>

<div>
<label for="食物為環境">食物為環境　　　:</label>
<input type="number" id="食物為環境" name="食物為環境" min="0" value="0" oninput="calculateTotal()">
<span>本</span>
</div><br>

<label for="address">郵寄地址:</label>
<input type="text" id="address" name="address" required style="width: 600px;"><br>

<label for="聯絡電話">聯絡電話:</label>
<input type="tel" id="聯絡電話" name="聯絡電話" pattern="[0-9]*" title="請輸入數字格式，不包含其他符號" required><br>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.onload = function() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const formattedDate = `${year}-${month}-${day}`;
            document.getElementById('payment_date').value = formattedDate;
        }
    </script>
</head>
<body>
    <label for="payment_date">匯款日期:</label>
    <input type="date" id="payment_date" name="payment_date"><br>
</body>

<label for="匯款帳號後五碼">匯款帳號後五碼:</label>
<input type="text" id="匯款帳號後五碼" name="匯款帳號後五碼" pattern="\d{5}" title="請輸入5位數字" required><br>

<label for="訊息">訊息:</label><br>
<textarea id="訊息" name="訊息" rows="4" cols="50"></textarea><br><br>

<div id="calculation-breakdown">
  <p>書籍小計: <span id="book-subtotal">0</span> 元</p>
  <p id="shipping-info">運費: 免運費</p>
  <p id="discount-info"></p>
</div>

<h3>應付金額: <span id="total">0</span> 元</h3>

<!-- 隱藏欄位用於提交計算結果 -->
<input type="hidden" id="submitted-book-subtotal" name="submitted-book-subtotal" value="">
<input type="hidden" id="submitted-shipping-info" name="submitted-shipping-info" value="">
<input type="hidden" id="submitted-discount-info" name="submitted-discount-info" value="">
<input type="hidden" id="submitted-total" name="submitted-total" value="">

<input type="submit" value="送出">

</form>

</div>

<!-- 計算機程式碼開始 -->
<script>
function calculateTotal() {
  const bookPrices = {
    "我們都是氣候世代": 360,
    "挺身為環境": 380,
    "食物為環境": 360
  };
  
  let bookSubtotal = 0;
  let bookCount = 0;
  
  for (const bookName in bookPrices) {
    const quantity = parseInt(document.getElementById(bookName).value);
    bookSubtotal += bookPrices[bookName] * quantity;
    bookCount += quantity;
  }
  
  let total = bookSubtotal;
  
  if (bookCount >= 10) {
    total *= 0.9; // 九折優惠
  }
  
  if (bookCount < 3) {
    total += 30; // 加收運費
  }
  
  document.getElementById("book-subtotal").textContent = bookSubtotal;
  document.getElementById("total").textContent = total;
  
  const shippingInfo = document.getElementById("shipping-info");
  const discountInfo = document.getElementById("discount-info");
  
  if (bookCount < 3) {
    shippingInfo.textContent = "運費: 30 元";
  } else {
    shippingInfo.textContent = "運費: 免運費";
  }
  
  if (bookCount >= 10) {
    discountInfo.textContent = "折扣: 九折優惠";
  } else {
    discountInfo.textContent = "";
  }
  
  // 更新隱藏欄位的值
  document.getElementById("submitted-book-subtotal").value = bookSubtotal;
  document.getElementById("submitted-shipping-info").value = shippingInfo.textContent;
  document.getElementById("submitted-discount-info").value = discountInfo.textContent;
  document.getElementById("submitted-total").value = total;
}
</script>
<!-- 計算機程式碼結束 -->